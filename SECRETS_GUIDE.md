# üîê –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ù–ê–°–¢–†–û–ô–ö–ï –°–ï–ö–†–ï–¢–û–í

## üìç –û–°–ù–û–í–ù–´–ï –ú–ï–°–¢–ê –î–õ–Ø –î–û–ë–ê–í–õ–ï–ù–ò–Ø –°–ï–ö–†–ï–¢–û–í:

### 1. **–§–ê–ô–õ `.env` (–ì–õ–ê–í–ù–û–ï –ú–ï–°–¢–û)**
```bash
# –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: /home/runner/work/BMI-App_2025_clean/BMI-App_2025_clean/.env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:**
```env
# API –∫–ª—é—á –¥–ª—è –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π
API_KEY=your_secret_api_key_here

# API –∫–ª—é—á –¥–ª—è X.AI/Grok
XAI_API_KEY=your_xai_api_key_here
```

### 2. **–§–ê–ô–õ–´ –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**
```bash
# –î–ª—è —Ç–µ—Å—Ç–æ–≤:
tests/tmp_secret.txt       - API_KEY="1234567890abcdefABCDEF"
tests/_tmp_secret.txt      - API_KEY="aaaaaaaaaaaaaaaaaaaa"
```

### 3. **–ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø (–ü–†–û–î–ê–ö–®–ï–ù)**
```bash
export API_KEY="your_production_key"
export XAI_API_KEY="your_xai_production_key"
```

## üîß –ù–ê–°–¢–†–û–ô–ö–ê:

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
```bash
cp .env.example .env
```

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã
–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:
- `your_api_key_here` ‚Üí –≤–∞—à –Ω–∞—Å—Ç–æ—è—â–∏–π API –∫–ª—é—á
- `your_xai_api_key_here` ‚Üí –≤–∞—à X.AI API –∫–ª—é—á

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
uvicorn app:app --reload

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å API –∫–ª—é—á–æ–º
curl -H "X-API-Key: your_api_key_here" http://localhost:8000/api/v1/bmi
```

## üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω
- –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üìù –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í –ö–û–î–ï:

–°–µ–∫—Ä–µ—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ `app.py`:
```python
# –°—Ç—Ä–æ–∫–∞ 171: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞ –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è
expected = os.getenv("API_KEY")

# –°—Ç—Ä–æ–∫–∞ 167: –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è API –∫–ª—é—á–∞
api_key_header = APIKeyHeader(name="X-API-Key", auto_error=False)
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

```bash
# –ó–∞–ø—É—Å–∫ —Å —Ç–µ—Å—Ç–æ–≤—ã–º API –∫–ª—é—á–æ–º
API_KEY=test_key python -m pytest tests/

# –ó–∞–ø—É—Å–∫ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏–∑ .env
python -m uvicorn app:app --reload
```